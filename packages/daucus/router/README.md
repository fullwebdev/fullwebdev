# `@daucus/router`

> Router for Daucus Web Apps
>
> :book: [Documentation](https://fullweb.dev/daucus)

`@daucus/router` provides 3 differents solutions to help you use the routes generated by the Daucus CLI (`routes.js`):

1. a simple `daucus-router` Web Component
2. a programmatic router
3. route matching functions, for custom routing33

## Usage Examples

- basic: [Snowpack Template](https://github.com/fullwebdev/fullwebdev/blob/master/packages/daucus/snowpack-template/src/app/app-root.js#L207-L213)
- custom (i18n): [fullweb.dev](https://github.com/fullwebdev/fullwebdev/blob/master/website/src/app/router.js)

## Programmatic API

The [`DaucusRouter`](/daucus/router/API/classes/daucusrouter) class provides a default implementation of the [`@modern-helpers/router`](https://fullweb.dev/helpers/router) [`AbstractRouter`](https://fullweb.dev/helpers/router/API/classes/abstractrouter) for Daucus.

```js
import { DaucusRouter } from "@daucus/router";
// routes generated by the Daucus CLI
import daucusRoutes from "./_daucus_/routes.js";

const appRouter = new DaucusRouter();
appRouter.run(daucusRoutes, "/the-default-path/", "/base/directory");
```

For more advanced use cases, use the `routeFinder` and `i18nRouteFinder` functions to match a path with a Daucus route.

```js
import { routeFinder } from "@daucus/router";
// routes generated by the Daucus CLI
import daucusRoutes from "./_daucus_/routes.js";

const daucusRouteFinder = routeFinder(daucusRoutes);

// custom routing
function myCustomRouter() {
  //...
  if (path.startsWith("/docs/")) {
    const daucusRoute = daucusRouteFinder(path);
    //...
  }
}
```

For now, building a custom router is mandatory when using the i18n option with the Daucus CLI.

```js
import { i18nRouteFinder } from "@daucus/router";
// routes generated by the Daucus CLI (with "i18n": true)
import daucusRoutes from "./_daucus_/routes.js";

const daucusRouteFinder = i18nRouteFinder(daucusRoutes);

// custom routing
function myCustomRouter() {
  //...
  if (path.startsWith("/docs/")) {
    const daucusRoute = daucusRouteFinder(path, lang);
    //...
  }
}
```

## Web Components

### daucus-router

Routing wrapper element for Daucus Routes

Wrap the programmatic DaucusRouter for declarative usage.

#### Properties

<!-- prettier-ignore -->
| Property      | Attribute      | Type                | Default      | Description                                                                               |
| ------------- | -------------- | ------------------- | ------------ | ----------------------------------------------------------------------------------------- |
| `baseDir`     | `base-dir`     | `string`            | "templates/" | Directory where templates are published, relative to the baseHRef (should end with a '/') |
| `defaultPath` | `default-path` | `string`            | "/docs/"     | Path of the default route                                                                 |
| `routes`      |                | `SimpleRoutesConfig | undefined`   |  | Daucus Routes |

#### Events

| Event               | Description                                             |
| ------------------- | ------------------------------------------------------- |
| `navigation-end`    | A navigation ended without error                        |
| `navigation-start`  | New navigation begins                                   |
| `project-change`    | A navigation led to a route from another Daucus Project |
| `route-match`       | A corresponding route was found for a navigation        |
| `route-redirection` | A navigation led to a redirection to another route      |
